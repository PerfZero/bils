from django.core.management.base import BaseCommand
from store.models import FAQCategory, FAQQuestion


class Command(BaseCommand):
    help = 'Seed FAQ data based on frontend content'

    def handle(self, *args, **options):
        # Clear existing FAQ data
        FAQQuestion.objects.all().delete()
        FAQCategory.objects.all().delete()

        # Create FAQ categories and questions based on frontend
        categories_data = [
            {
                'name': 'Интернет-магазин',
                'slug': 'internet-magazin',
                'order': 1,
                'questions': [
                    {
                        'question': 'Как оформить покупку в интернет-магазине «BREMAX»?',
                        'answer': '''<b>Оформление заказа через «Корзину» товаров на сайте</b>
<ol>
    <li>На сайте выберите нужный товар, нажмите кнопку «В корзину» и укажите количество.</li>
    <li>Для заказа сразу нескольких товаров нажмите кнопку «Продолжить покупки», и вы вернетесь опять к каталогу.</li>
    <li>Нажмите кнопку «Перейти в корзину» и «Оформить заказ».</li>
    <li>Выберите способ доставки (самовывоз или доставка в пункт выдачи), ниже на странице введите свои данные, выберите способ оплаты, еще раз проверьте правильность своего заказа и, если требуется, укажите дополнительную информацию в комментарии.</li>
    <li>Нажмите кнопку «Отправить заказ». Позже на вашу электронную почту придет подтверждение заказа с персональным номером. Как заказ будет готов, с Вами свяжется наш менеджер и сообщит дату и место, где можно получить товар.</li>
</ol>
<b>Быстрый заказ в 1 клик</b>
<ol>
    <li>Нажмите кнопку «Купить в 1 клик»</li>
    <li>В появившемся окне укажите свои данные и номер телефона, нажмите кнопку «Отправить».</li>
    <li>Дождитесь звонка нашего менеджера, который оформит Ваш заказ.</li>
</ol>
<b>Другие способы заказа</b>
<p>Вы можете оформить заказ по нашему бесплатному номеру 8-800-555-69-73 с 8-00 до 20-00 (звонок бесплатный по РФ), отправить заявку на почту help@bigam.ru или написать нам в онлайн-чате.</p>''',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Доставка',
                'slug': 'dostavka',
                'order': 2,
                'questions': [
                    {
                        'question': 'Проверяет ли курьер технику при мне, когда привозит заказ?',
                        'answer': '<p>Курьер проверяет целостность упаковки и внешний вид товара, его комплектацию и сопутствующие документы. Проверка работоспособности товара, подключение, установка и настройка техники осуществляются квалифицированными специалистами, в обязанности курьера данные функции не входят.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Гарантии',
                'slug': 'garantii',
                'order': 3,
                'questions': [
                    {
                        'question': 'Обмен и возврат товара производится в том же магазине, где он был куплен?',
                        'answer': '<p>Да. С предъявлением чека или иного документа, подтверждающего покупку в нашем магазине.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Каталог товаров',
                'slug': 'katalog-tovarov',
                'order': 4,
                'questions': [
                    {
                        'question': 'Как узнать, в каком состоянии образец с витрины?',
                        'answer': '<p>Эту информацию можно уточнить непосредственно у менеджера интернет-магазина. Наши сотрудники всегда помогут Вам найти нужный товар и проконсультируют по интересующим вопросам.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Сервисное обслуживание',
                'slug': 'servisnoe-obsluzhivanie',
                'order': 5,
                'questions': [
                    {
                        'question': 'Производит ли компания «BREMAX» монтаж и установку оборудования (кондиционеры, сантехника и т.д.)?',
                        'answer': '<p>Компания «BREMAX» не предоставляет услугу по монтажу и установке оборудования.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Акции',
                'slug': 'aktsii',
                'order': 6,
                'questions': [
                    {
                        'question': 'Где посмотреть условия акции?',
                        'answer': '<p>Страницы всех действующих акций доступны в разделе «Акции» https://www.bigam.ru/customer/promo/. Перейдя на страницу конкретной акции, Вы увидите подробный перечень условий или ссылку на них, а также список акционных товаров, если он предусмотрен.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Подарочные карты',
                'slug': 'podarochnye-karty',
                'order': 7,
                'questions': [
                    {
                        'question': 'Какой срок действия подарочной карты и как можно ее использовать?',
                        'answer': '<p>Подарочная карта действительна в течение 1 года с момента ее активации (покупки), суммируется со скидками по дисконтной карте, действует на все акционные товары и может передаваться другому лицу.</p>',
                        'order': 1
                    }
                ]
            },
            {
                'name': 'Контакты',
                'slug': 'kontakty',
                'order': 8,
                'questions': [
                    {
                        'question': 'Где я могу найти контакты отделов компании (отдел Закупок, отдел Логистики, отдел Рекламы и маркетинга, Отдел кадров и др.)?',
                        'answer': '<p>Данную информацию вы можете найти на странице «Магазины» во вкладке «Дополнительные контакты».</p>',
                        'order': 1
                    },
                    {
                        'question': 'Какой режим работы магазинов «BREMAX» в моем городе?',
                        'answer': '<p>С режимом работы интересующего вас Центра продаж/склада можно ознакомиться на сайте в разделе «Контакты», выбрав нужный город и нажав на флажок магазина.</p>',
                        'order': 2
                    }
                ]
            },
            {
                'name': 'Промокоды',
                'slug': 'promokody',
                'order': 9,
                'questions': [
                    {
                        'question': 'Применение промокодов',
                        'answer': '''<p>Минимальная сумма заказа после применения промокода – 5000 рублей.</p>
<p>В рамках некоторых рекламных акций, проводимых Интернет-магазином «BREMAX», могут выпускаться промокоды с иным ограничением на минимальную сумму Заказа.</p>
<p>Промокоды имеют ограниченный срок действия.</p>
<p>Заказ необходимо оформить в течение срока действия промокода. При редактировании Заказа после истечения срока действия промокода он становится недействительным.</p>
<p>Промокод может распространяться только на определенную категорию товаров в Заказе.</p>
<p>Промокоды могут распространяться только на первый заказ, совершенный Покупателем, если это правило установлено в условиях проводимой акции.</p>
<p>Особые условия покупки по промокоду могут не распространяться на определенные товары.</p>
<p>Один промокод может распространяться на несколько Заказов, совершаемых Покупателем, если это предусмотрено условиями соответствующей рекламной акции.</p>''',
                        'order': 1
                    }
                ]
            }
        ]

        for cat_data in categories_data:
            category = FAQCategory.objects.create(
                name=cat_data['name'],
                slug=cat_data['slug'],
                order=cat_data['order']
            )

            for q_data in cat_data['questions']:
                FAQQuestion.objects.create(
                    category=category,
                    question=q_data['question'],
                    answer=q_data['answer'],
                    order=q_data['order'],
                    is_active=True
                )

        self.stdout.write(
            self.style.SUCCESS('Successfully seeded FAQ data')
        )
